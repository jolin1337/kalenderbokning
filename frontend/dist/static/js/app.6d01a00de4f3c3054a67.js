webpackJsonp([1],{"2wRh":function(t,e){},"75Dh":function(t,e){},"7zck":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("v-main",[e("router-view")],1)],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},i,!1,function(t){n("75Dh")},null,null).exports,o=n("/ocq"),s=n("mvHQ"),l=n.n(s),c=n("mtWM"),d=n.n(c),v=n("Dd8w"),u=n.n(v),h={props:{canAddNew:{default:function(){return!1}},canModify:{default:function(){return!1}},customAttrs:{default:function(){return{}}},minDuration:{type:Number,default:function(){return 18e5}},maxDuration:{type:Number,default:function(){return 36e5}}},data:function(){return{value:"",showAlert:!1,activeEvent:null,events:[],newEvents:[],eventSlots:[],colors:["#2196F3","#3F51B5","#673AB7","#00BCD4","#4CAF50","#FF9800","#757575"],names:["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"],dragEvent:null,dragTime:null,dragStart:null,createEvent:null,createStart:null,extendOriginal:null}},methods:{showEvent:function(t){var e=t.event;this.canModify(e)&&(this.activeEvent=e,this.showAlert=!0)},hideEvent:function(){this.showAlert=!1,this.activeEvent=null},removeEvent:function(){if(this.canModify(this.activeEvent)){var t=this.events.indexOf(this.activeEvent);this.events.splice(t,1),this.hideEvent()}},startDrag:function(t){var e=t.event,n=t.timed;e&&n&&this.canModify(e)&&(this.dragEvent=e,this.dragTime=null,this.extendOriginal=null)},startTime:function(t){var e=this.toTime(t);if(this.dragEvent&&null===this.dragTime){var n=this.dragEvent.start;this.dragTime=e-n}else{if(!this.canAddNew(this.events))return;this.createStart=this.roundTime(e),this.createEvent=u()({id:this.getUuid(),name:"Boka Här",color:this.rndElement(this.colors),start:this.createStart,end:this.createStart+this.minDuration,timed:!0},this.customAttrs),this.events.push(this.createEvent),this.newEvents.push(this.createEvent)}},extendBottom:function(t){this.createEvent=t,this.createStart=t.start,this.extendOriginal=t.end},mouseMove:function(t){var e=this.toTime(t);if(this.dragEvent&&null!==this.dragTime){var n=this.dragEvent.start,a=this.dragEvent.end,i=Math.max(this.minDuration,Math.min(this.maxDuration,a-n)),r=e-this.dragTime,o=this.roundTime(r),s=o+i;this.dragEvent.start=o,this.dragEvent.end=s}else if(this.createEvent&&null!==this.createStart){var l=this.roundTime(e,!1),c=Math.min(l,this.createStart),d=Math.max(l,this.createStart),v=Math.max(this.minDuration,Math.min(this.maxDuration,d-c));l===c&&v<d-c?c=d-v:l===c&&v>d-c&&(c=d-v),l===d&&v<d-c?d=c+v:l===d&&v>d-c&&(d=c+v),this.createEvent.start=c,this.createEvent.end=d}},endDrag:function(){this.dragTime=null,this.dragEvent=null,this.createEvent=null,this.createStart=null,this.extendOriginal=null},cancelDrag:function(){if(this.createEvent)if(this.extendOriginal)this.createEvent.end=this.extendOriginal;else{var t=this.events.indexOf(this.createEvent);-1!==t&&this.events.splice(t,1)}this.createEvent=null,this.createStart=null,this.dragTime=null,this.dragEvent=null},roundTime:function(t){return!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?t-t%9e5:t+(9e5-t%9e5)},toTime:function(t){return new Date(t.year,t.month-1,t.day,t.hour,t.minute).getTime()},getEventColor:function(t){var e=parseInt(t.color.substring(1),16),n=e>>16&255,a=e>>8&255,i=e>>0&255;return t===this.dragEvent?"rgba("+n+", "+a+", "+i+", 0.7)":t===this.createEvent?"rgba("+n+", "+a+", "+i+", 0.7)":t.color},getEvents:function(t){var e=this,n=t.start,a=t.end,i=window.location.href.split("#")[0].split("?")[0];this.getEventSlots({end:a,start:n}),d.a.get(i+"?start="+n.date+"&end="+a.date+"&action=events").then(function(t){t.data instanceof Array&&(e.events=t.data)})},getEventSlots:function(t){var e=this,n=t.start,a=t.end,i=window.location.href.split("#")[0].split("?")[0];d.a.get(i+"?start="+n.date+"&end="+a.date+"&action=eventslots").then(function(t){t.data instanceof Array&&(e.eventSlots=t.data)})},rnd:function(t,e){return Math.floor((e-t+1)*Math.random())+t},rndElement:function(t){return t[this.rnd(0,t.length-1)]},getUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",[n("v-alert",{attrs:{value:t.showAlert,color:"pink",dark:"",border:"top",icon:"mdi-delete",transition:"scale-transition"}},[t._v("\n        Vill du ta bort din bokning?\n        "),n("v-row",[n("v-col",[n("v-btn",{staticClass:"mr-4",on:{click:t.removeEvent}},[t._v(" Ta bort ")])],1),t._v(" "),n("v-col",[n("v-btn",{staticClass:"mr-4",on:{click:t.hideEvent}},[t._v(" Avbryt ")])],1)],1)],1)],1)],1),t._v(" "),n("v-row",{staticClass:"fill-height"},[n("v-col",[n("v-sheet",{attrs:{height:"600"}},[n("v-calendar",{ref:"calendar",attrs:{color:"primary",type:"4day",locale:"SWE",events:t.events,"event-color":t.getEventColor,"interval-minutes":30,"interval-count":48,"interval-height":30,"event-ripple":!1},on:{"contextmenu:event":t.showEvent,change:t.getEvents,"mousedown:event":t.startDrag,"mousedown:time":t.startTime,"mousemove:time":t.mouseMove,"mouseup:time":t.endDrag},nativeOn:{mouseleave:function(e){return t.cancelDrag(e)}},scopedSlots:t._u([{key:"day-label-header",fn:function(e){var a=e.day,i=e.present;return[n("v-row",[n("v-col",{style:{color:i?"blue":"black","font-weight":i?"bold":"normal"}},[t._v("\n                "+t._s(a)+"\n              ")])],1)]}},{key:"interval",fn:function(e){var a=e.date,i=e.time,r=e.past;return[n("v-row",{staticClass:"fill-height"},[!t.eventSlots.includes(a+"T"+i)||r?[n("v-col",[n("v-sheet",{staticStyle:{"margin-top":"-12px"},attrs:{title:"Test",color:"#eee",width:"100%",height:"29px"}})],1)]:t._e()],2)]}}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1)],1),t._v(" "),n("v-row",[n("v-col",[t._v("\n      Dra och släpp för att skapa en boknings tid. Du kan flytta din bokning\n      genom att dra den upp eller ner. För att ta bort bokningen högerklicka\n      och välj, ta bort. När din bokning ser bra ut klickar du på boka knappen\n      så skickar vi en inbjudan till dig på mail/avbokan ifall du tagit bort\n      din bokning.\n    ")])],1)],1)},staticRenderFns:[]},f={components:{calendar:n("VU/8")(h,m,!1,null,null,null).exports},data:function(){return{email:null,msg:"Välj en tid att boka möte",valid:!1,eventsLoaded:!1,date:""}},computed:{customAttrs:function(){return{email:this.email}},url:function(){return window.location.href.split("#")[0].split("?")[0]}},methods:{validate:function(){var t=this;if(this.$refs.form.validate(),this.valid){var e=new FormData,n=this.$refs.cal.events.find(function(e){return e.email===t.email});n?(n.name="Event for "+this.email,e.append("event",l()(n)),e.append("action","addEvent")):(n={email:this.email},e.append("event",l()(n)),e.append("action","deleteEvent")),d.a.post(this.url,e).then(function(e){e.data.error?alert("Du kunde inte skapa/uppdatera/ta bort din bokning på denna tiden"):t.$router.push("/confirm")}).catch(function(t){console.error(t)})}},canAddNew:function(t){var e=this;return this.eventsLoaded&&!t.find(function(t){return t.email===e.email})},canModify:function(t){return this.eventsLoaded&&t.email===this.email}},mounted:function(){var t=this;a.default.config.devtools?this.eventsLoaded=!0:d.a.get(this.url+"?action=loggedin").then(function(e){t.email=e.data.email,t.eventsLoaded=!0,!1===e.data.loggedin&&t.$router.push("/login")}).catch(function(e){t.$router.push("/login")})}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",[n("v-row",[n("v-col",[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("calendar",{ref:"cal",attrs:{canModify:t.canModify,canAddNew:t.canAddNew,"custom-attrs":t.customAttrs}})],1)],1),t._v(" "),n("v-row",[n("v-col",[n("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid},on:{click:t.validate}},[t._v("\n          Boka!\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var g=n("VU/8")(f,p,!1,function(t){n("Wkao")},"data-v-070730dc",null).exports,x={data:function(){return{msg:"Logga in för att boka",valid:!1,email:"",password:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail måste vara korrekt"}],passwordRules:[function(t){return!!t||"Lösenord krävs för att logga in"}]}},methods:{validate:function(){var t=this;if(this.$refs.form.validate()&&this.valid){var e=new FormData;e.append("email",this.email),e.append("pwd",this.password),e.append("action","login");var n=window.location.href.split("#")[0].split("?")[0];d.a.post(n,e).then(function(){t.$router.push("/")}).catch(function(t){console.error(t)})}}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",[n("v-row",[n("v-col",[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("v-text-field",{attrs:{rules:t.emailRules,counter:30,label:"E-post",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),t._v(" "),n("v-row",[n("v-col",[n("v-text-field",{attrs:{type:"password",rules:t.passwordRules,label:"Lösenord",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),n("v-row",[n("v-col",[n("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid},on:{click:t.validate}},[t._v("\n          Logga in\n        ")])],1)],1)],1)],1)},staticRenderFns:[]};var w=n("VU/8")(x,E,!1,function(t){n("2wRh")},"data-v-726b7a20",null).exports,b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",[n("v-row",[n("v-col",[t._v(" Din bokning blev godkänd! ")])],1),t._v(" "),n("v-row",[n("v-col",[n("v-btn",{staticClass:"mr-4"},[n("router-link",{attrs:{to:"/"}},[t._v("Tillbaka till kalendern")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var k=n("VU/8")({},b,!1,function(t){n("XS7c")},"data-v-779e8104",null).exports;a.default.use(o.a);var y=new o.a({routes:[{path:"/",name:"Home",component:g},{path:"/login",name:"Login",component:w},{path:"/confirm",name:"Confirm",component:k}]}),_=n("3EgV"),T=n.n(_);n("7zck");a.default.use(T.a);var D=new T.a({theme:{dark:!1,themes:{light:{primary:"#3f51b5",secondary:"#b0bec5",accent:"#8c9eff",error:"#b71c1c"}}}});a.default.config.productionTip=!1,new a.default({el:"#app",router:y,vuetify:D,components:{App:r},template:"<App/>"})},Wkao:function(t,e){},XS7c:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6d01a00de4f3c3054a67.js.map